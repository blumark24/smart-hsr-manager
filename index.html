<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Smart HSR Dashboard — المدن الذكية تبدأ من الميدان</title>

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;700;800;900&family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css" />

  <style>
    :root{
      --turquoise:#0EA5A1;
      --navy:#0B2B3A;
      --ink:#0b1b32;
      --muted:#6b7280;
      --card:#0f1f2a;
      --ring: rgba(14,165,161,.5);
    }
    html,body{scroll-behavior:smooth;}
    body{font-family:'Tajawal', system-ui, sans-serif; background:linear-gradient(180deg,#0b2b3a 0%, #0e2330 30%, #081722 100%); color:#e8f4f4}
    .stars{pointer-events:none; position:fixed; inset:0; background:radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,.18), transparent 60%), radial-gradient(1px 1px at 80% 60%, rgba(255,255,255,.12), transparent 60%), radial-gradient(1px 1px at 40% 80%, rgba(255,255,255,.10), transparent 60%); opacity:.35; mix-blend-mode:screen}
    .glow{box-shadow:0 0 0 0 rgba(14,165,161,0.4); animation:pulseGlow 3.5s ease-in-out infinite;}
    @keyframes pulseGlow{0%,100%{box-shadow:0 0 0 0 rgba(14,165,161,.35);}50%{box-shadow:0 0 28px 6px rgba(14,165,161,.55);}}
    .glass{background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.12); backdrop-filter:blur(10px);}
    .ringed{position:relative;}
    .ringed:after{content:""; position:absolute; inset:-2px; border-radius:inherit; padding:2px; background:conic-gradient(from 140deg, rgba(14,165,161,.75), rgba(11,43,58,.8), rgba(14,165,161,.75)); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; border-radius:inherit;}
    .btn{display:inline-flex; align-items:center; gap:.6rem; padding:.9rem 1.25rem; border-radius:1rem; font-weight:800; letter-spacing:.2px; transition:transform .2s ease, box-shadow .2s ease, background .2s ease; background:linear-gradient(180deg, #0EA5A1, #0a8c88); color:#062226}
    .btn:hover{transform:translateY(-2px); box-shadow:0 10px 24px rgba(14,165,161,.35);}
    .btn-secondary{background:linear-gradient(180deg, #0b2b3a, #082231); color:#dff9f7; border:1px solid rgba(255,255,255,.1)}
    .orb{position:absolute; width:700px; height:700px; background:radial-gradient(circle at 50% 50%, rgba(14,165,161,.24), rgba(14,165,161,0) 60%); filter:blur(30px); pointer-events:none; transform:translate(-50%,-50%);}
    .kpi{background:linear-gradient(180deg, rgba(14,165,161,.12), rgba(255,255,255,.02)); border:1px solid rgba(14,165,161,.25)}
    .nano{position:relative;}
    .nano:before{content:""; position:absolute; inset:-10px; background:radial-gradient(30px 30px at 50% 50%, rgba(14,165,161,.35), transparent 60%); filter:blur(16px); z-index:-1; opacity:.8}
    .pdf-frame{border:1px solid rgba(255,255,255,.08); border-radius:20px; overflow:hidden;}
    .en{font-family:'Inter', system-ui, sans-serif}
  </style>
</head>

<body>
  <div id="orb" class="orb" style="top:30%; left:70%"></div>
  <div class="stars"></div>

  <!-- Header -->
  <header class="sticky top-0 z-40 backdrop-blur-md/60 bg-[#0B2B3A]/70 border-b border-white/10">
    <div class="max-w-7xl mx-auto px-5 py-4 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-11 h-11 rounded-2xl bg-white/90 flex items-center justify-center glow ringed">
          <span class="font-black text-[#0B2B3A]">SH</span>
        </div>
        <div class="leading-tight">
          <div class="font-extrabold text-white text-lg">Smart HSR <span class="text-[var(--turquoise)]">Dashboard</span></div>
          <div class="text-xs text-white/70 en">AI-Powered Urban Quality</div>
        </div>
      </div>
      <nav class="hidden md:flex items-center gap-6 text-white/80">
        <a href="#about" class="hover:text-white">الملف التعريفي</a>
        <a href="#demo" class="hover:text-white">تجربة الذكاء الصناعي</a>
        <a href="#impact" class="hover:text-white">الأثر</a>
        <a href="#features" class="hover:text-white">المميزات</a>
        <a href="#contact" class="hover:text-white">تواصل</a>
      </nav>
      <div class="flex items-center gap-2">
        <a href="Home.html" class="btn glow">🚀 الدخول إلى النظام التنفيذي</a>
      </div>
    </div>
  </header>

  <!-- AI Demo Section -->
  <section id="demo" class="py-20">
    <div class="max-w-7xl mx-auto px-6">
      <header class="max-w-3xl" data-aos="fade-up">
        <h2 class="text-3xl md:text-4xl font-extrabold">✨ جرب الذكاء الصناعي الآن <span class="en">| Try the AI Demo</span></h2>
        <p class="mt-3 text-white/70">ارفع صورة ميدانية وشاهد الوصف التحليلي الفعلي فورًا عبر Gemini API.</p>
      </header>
      <div class="mt-8 grid md:grid-cols-2 gap-6 items-stretch" data-aos="fade-up">
        <div class="glass ringed rounded-2xl p-6 flex flex-col justify-center">
          <label class="block text-sm text-white/70 mb-2">اختر صورة (JPEG/PNG)</label>
          <input id="aiFile" type="file" accept="image/*" class="file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-[var(--turquoise)] file:text-[#062226] hover:file:opacity-90 text-white/80" />
          <div id="preview" class="mt-5 aspect-[16/10] bg-black/30 rounded-xl grid place-items-center text-white/40 text-sm">لا توجد صورة بعد</div>
          <button id="analyzeBtn" class="btn mt-5 w-full glow">تحليل الصورة بالذكاء الصناعي</button>
        </div>
        <div class="glass ringed rounded-2xl p-6">
          <h3 class="font-bold text-xl">📄 النتيجة التحليلية</h3>
          <div id="aiResult" class="mt-3 text-white/80 leading-relaxed">—</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Scripts -->
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
  <script>
    AOS.init({ once:true, duration:800, easing:'ease-out-cubic' });

    const orb = document.getElementById('orb');
    window.addEventListener('mousemove', (e)=>{
      const { innerWidth:w, innerHeight:h } = window;
      const x = (e.clientX / w) * 100;
      const y = (e.clientY / h) * 100;
      orb.style.left = `${x}%`;
      orb.style.top = `${y * .6 + 10}%`;
    });

    const aiFile = document.getElementById('aiFile');
    const preview = document.getElementById('preview');
    const analyzeBtn = document.getElementById('analyzeBtn');
    const aiResult = document.getElementById('aiResult');
    let imgDataUrl = null;

    aiFile?.addEventListener('change', (ev)=>{
      const file = ev.target.files?.[0];
      if(!file) return;
      const rd = new FileReader();
      rd.onload = ()=>{
        imgDataUrl = rd.result;
        preview.innerHTML = `<img src="${imgDataUrl}" alt="preview" class="w-full h-full object-cover rounded-xl"/>`;
      };
      rd.readAsDataURL(file);
    });

    analyzeBtn?.addEventListener('click', async ()=>{
      if (!imgDataUrl) {
        alert('من فضلك اختر صورة أولاً.');
        return;
      }
      aiResult.textContent = '⏳ جاري تحليل الصورة عبر النظام...';
      try {
        const response = await fetch('https://smart-hsr-function-38965508031.europe-west1.run.app', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ image: imgDataUrl })
        });
        const resultText = await response.text();
        aiResult.innerHTML = `<div class="leading-relaxed">${resultText}</div>`;
      } catch (err) {
        console.error(err);
        aiResult.textContent = '❌ حدث خطأ أثناء الاتصال بخدمة التحليل.';
      }
    });
  </script>
</body>
</html>
